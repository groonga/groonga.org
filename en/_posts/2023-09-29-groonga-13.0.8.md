---
layout: post.en
title: Groonga 13.0.8 has been released
description: Groonga 13.0.8 has been released!
published: false
---

## Groonga 13.0.8 has been released

[Groonga 13.0.8](/docs/news.html#release-13-0-8) has been released!

How to install: [Install](/docs/install.html)

### Changes

Here are important changes in this release:

### Improvements

* [[column_create](/docs/reference/commands/column_create.html)] Improved `column_create` flags with additional new flags `COLUMN_FILTER_SHUFFLE`, `COLUMN_FILTER_BYTE_DELTA`, `COMPRESS_FILTER_TRUNCATE_PRECISION_1BYTE`, and `COMPRESS_FILTER_TRUNCATE_PRECISION_2BYTES`.

* Added  bundling new Blosc library.

 Blosc is required to use  `COLUMN_FILTER_SHUFFLE`, `COLUMN_FILTER_BYTE_DELTA`, `COMPRESS_FILTER_TRUNCATE_PRECISION_1BYTE`, and `COMPRESS_FILTER_TRUNCATE_PRECISION_2BYTES` flags.

* [[status](/docs/reference/commands/status.html)] Improved `status` output with additional new features `"blosc"`.

* [[groonga](/docs/reference/executables/groonga.html)] Improved `groonga --version` output with additional new value `blosc`.

* [[select](/docs/reference/commands/select.html)] Improved `select` arguments with additional new argument `--fuzzy_max_distance` (experimental).


  This argument is useful when search process can tolerance typographical errors. This argument revise typographical errors by users.

In case of setting this argument, Groonga proceed search again after checking a word with edit distance indicated under `--fuzzy_max_distance` from the vocabulary list when the query does not match as shown in following example.

table_create Memos TABLE_NO_KEY
column_create Memos content COLUMN_SCALAR ShortText

table_create Lexicon TABLE_PAT_KEY ShortText   --default_tokenizer TokenNgram   --normalizer NormalizerNFKC150
column_create Lexicon memos_content   COLUMN_INDEX|WITH_POSITION Memos content
load --table Memos
[
{"content": "This is a pen"},
{"content": "That is a pen"}
]

select Memos   --match_columns content   --query "Thjs"   --fuzzy_max_distance 1   --output_columns *,_score
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        1
      ],
      [
        [
          "content",
          "ShortText"
        ],
        [
          "_score",
          "Int32"
        ]
      ],
      [
        "This is a pen",
        1
      ]
    ]
  ]
]

* [[select](/docs/reference/commands/select.html)] Improved `select` arguments with additional new argument `--fuzzy_max_expansions` (experimental).
As mentioned, `--fuzzy_max_distance` let Groonga proceed search again after checking a word with edit distance indicated.

For example, if there are `This` and `That` in the vocabulary list, given query `Thjs`  would not match and `THjs `of `--fuzzy_max_distance 10` would be searched again in the vocabulary list as `This` and `That`.

In the above example, the vocabulary list have only 2 words that `--fuzzy_max_distance` is smaller than 10. If there were too many words that have edit distance smaller than 10, the performance would drop since all of those candidate words are searched. 

However, using `--fuzzy_max_expansions` can limit number of words that has close edit distance to use search process. This argument can help to balance hit numbers and performance of the search.

Default value of `--fuzzy max_expansions` is 0. When it is 0, the search use all words that the edit distance are under `--fuzzy max_distance` in the vocabulary list.


* [[select](/docs/reference/commands/select.html)] Improved `select` arguments with additional new argument `--fuzzy_max_distance_ratio` (experimental).


`--fuzzy_max_distance`set same value against every query. Thus, given query, "abc OR defghijklmn", would be set value `--fuzzy_max_distance`to both "abc" and "defhjklmn".

However, the length of keywords might influence how much tolerance against typographical errors. For example, "abc" has just 3 characters so that only 1 typography is tolerance. On the other hand, "defhjklmn" has many characters so that 3 typography is tolerance.

`--fuzzy_max_distance_ratio` is to change edit distance automatically depending on the number of charcters. This argument allow to set different edit distance for each keywords.

If `--fuzzy max_distance ratio FUZZY MAX_DISTANCE` is set, the edit distance would be calculate as " number of characters * `FUZZY_MAX_DISTANCE`(round down decimall)". 0.34 is recommended for "FUZZY_MAX_DISTANCE". It is because 0.34 is just about same as `fuzziness=AUTO` of Elasticsearch. 


* [[select](/docs/reference/commands/select.html)] Improved `select` arguments with additional new argument `--fuzzy_prefix_length` (experimental).

This is to accelerate search speed with `--fuzzy_max_distance`.

After applying it, the hit data would have characters that the leading characters of key word matches for the number of characters set in `--fuzzy prefix_length`.

It accelerate the process to limit the process target only for character strings that have common leading N characters since setting `--fuzzy_max_distance` large would expand process target and lead slow process.


* [cast] Added support for casting `"[0.0, 1.0, 1.1, ...]"` to `Float`/`Float32` vector as below.

  ```
  plugin_register functions/vector

  table_create Data TABLE_NO_KEY
  column_create Data numbers COLUMN_VECTOR Float32

  table_create Numbers TABLE_PAT_KEY Float32
  column_create Numbers data_numbers COLUMN_INDEX Data numbers

  load --table Data
  [
  {"numbers": "[0.1, 0.0, -0.2]"},
  {"numbers": "[-3, 2, -4294967296, 4294967296]"}
  ]

  dump   --dump_plugins no   --dump_schema no
  load --table Data
  [
  ["_id","numbers"],
  [1,[0.1,0.0,-0.2]],
  [2,[-3.0,2.0,-4.294967e+09,4.294967e+09]]
  ]

  column_create Numbers data_numbers COLUMN_INDEX Data numbers
  select Data --filter 'vector_size(numbers) == 3'
  [
    [
      0,
      0.0,
      0.0
    ],
    [
      [
        [
          1
        ],
        [
          [
            "_id",
            "UInt32"
          ],
          [
            "numbers",
            "Float32"
          ]
        ],
        [
          1,
          [
            0.1,
            0.0,
            -0.2
          ]
        ]
      ]
    ]
  ]
  ```
* [fuzzy_search] Rename `max_expansion` option to `max_expansions` option.

  `max_expansion` option is deprecate since this release. However, we can use `max_expansion` in the feature to backward compatibility.

* Rename master branch to main branch.

* [RPM] Used CMake for building.

* [Debian] Added support for Debian trixie.

### Fixes

* [fuzzy_search] Fixed a bug that Groonga may get records that should not match.

* [near-phrase-search] Fixed a bug that Groonga crashed when the first phrase group doesnâ€™t match anything as below.

  ```
  table_create Entries TABLE_NO_KEY
  column_create Entries content COLUMN_SCALAR Text
  table_create Terms TABLE_PAT_KEY ShortText \
    --default_tokenizer TokenNgram \
    --normalizer NormalizerNFKC121
  column_create Terms entries_content COLUMN_INDEX|WITH_POSITION \
    Entries content
  load --table Entries
  [
    {"content": "x y z"}
  ]
  select Entries \
    --match_columns Terms.entries_content.content \
    --query '*NPP1"(NONEXISTENT) (z)"' \
    --output_columns '_score, content'
  ```

### Conclusion

Please refert to the following news for more details.

[News Release 13.0.8](/docs/news.html#release-13-0-8)

Let's search by Groonga!

